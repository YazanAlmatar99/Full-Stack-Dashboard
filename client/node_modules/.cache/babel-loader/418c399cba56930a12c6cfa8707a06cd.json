{"ast":null,"code":"var _jsxFileName = \"/Users/yazanalmatar/Desktop/dashboard/client/src/components/Inventory.js\";\nimport React from \"react\";\nimport InventoryChart from \"./InventoryChart\";\nimport Loading from \"./Loading\";\nimport moment from \"moment\";\n\nclass Inventory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchRequestedId = async props => {\n      const response = await fetch(\"/api/v1/inventory/\".concat(this.state.requestedId), {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => {\n        return response.json();\n      }).then(data => {\n        this.setState({\n          response: data\n        });\n        this.daysDiffFinder();\n        this.velocityFinder();\n        console.log(this.state.velocityObject, \"after then function\");\n      });\n    };\n\n    this.daysDiffFinder = () => {\n      const oldestDate = this.state.response[0].inventory[0].date;\n      const newestDate = this.state.response[0].inventory[this.state.response[0].inventory.length - 1].date;\n      var oDate = moment(oldestDate);\n      var nDate = moment(newestDate);\n      console.log(oldestDate);\n      console.log(newestDate);\n      var diff = nDate.diff(oDate, \"days\");\n      console.log(diff);\n      this.setState({\n        daysDiff: diff\n      });\n      console.log(diff);\n    };\n\n    this.velocityFinder = () => {\n      const oldestInv = this.state.response[0].inventory[0];\n      const newestInv = this.state.response[0].inventory[this.state.response[0].inventory.length - 1];\n      var velocityObject = {};\n      console.log(oldestInv, newestInv);\n      const velocityData = oldestInv.variants.map((inv, i) => {\n        const velocity = (inv.inventory_quantity - newestInv.variants[i].inventory_quantity) / this.state.daysDiff;\n        console.log(\"--------------------------------\");\n        const title = this.state.response[0].variants[i].title;\n        console.log(this.state.response);\n        console.log(title);\n        console.log(\"--------------------------------\");\n        console.log(inv.id);\n        velocityObject[inv.id] = {\n          title: title,\n          velocity: velocity //   return (\n          //     <div>\n          //       <h6>\n          //         {title == \"Default Title\" ? \" \" : \"Size: \" + title} Velocity:{\" \"}\n          //         {velocity.toFixed(2)} Out of stock in:\n          //       </h6>\n          //     </div>\n          //   );\n          // });\n          // return velocityData;\n\n        };\n      });\n      this.setState({\n        velocityObject: velocityObject\n      });\n      console.log(velocityObject, \"velocity Object\");\n    };\n\n    this.velocityRender = () => {\n      if (this.state.velocityObject != null) {\n        var velocityState = this.state.velocityObject;\n        var velocityVar = this.state.response[0].variants.map(variant => {\n          console.log(\"*******\");\n          console.log(variant);\n          console.log(velocityState);\n          console.log(velocityState);\n          console.log(\"*******\");\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            },\n            __self: this\n          }, React.createElement(\"h6\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129\n            },\n            __self: this\n          }));\n        });\n        return velocityVar;\n      }\n    };\n\n    this.state = {\n      requestedId: this.props.match.params.id,\n      response: null,\n      daysDiff: 0,\n      stockArr: [],\n      velocityObject: {}\n    };\n  }\n\n  componentDidMount() {\n    this.fetchRequestedId();\n  }\n\n  getInStock() {\n    const mostUpdatedInv = this.state.response[0].inventory[this.state.response[0].inventory.length - 1];\n    var tempArr = [];\n    var inStock = mostUpdatedInv.variants.map(item => {\n      console.log(item);\n      tempArr.push(item.inventory_quantity);\n      var style = {};\n      var stockText = \"In Stock:\";\n\n      if (item.inventory_quantity == 0) {\n        style = {\n          color: \"red\"\n        };\n        stockText = \"Out of stock\";\n      }\n\n      return React.createElement(\"h6\", {\n        style: style,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, item.title == \"Default Title\" ? \" \" : \"Size: \" + item.title, \" \", stockText, \" \", item.inventory_quantity == 0 ? \" \" : item.inventory_quantity);\n    }); //this.setState({stockArr:tempArr})\n\n    return inStock;\n  }\n\n  renderContent() {\n    if (this.state.response) {\n      /************html*************/\n      const imageURL = this.state.response[0].image; //   let stock = '';\n      // if (this.state.stock) {\n      //   oerijgeoirjg.map((vv) =>{\n      //     stock+=(<p>feokroke</p>)\n      //   })\n      // }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"product_info_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"product_info_card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"demo-card-wide mdl-card mdl-shadow--2dp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mdl-card__title\",\n        style: {\n          backgroundImage: \"url(\".concat(imageURL, \")\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mdl-card__title-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, this.state.response[0].title, \" -\", \" \", this.state.response[0].product_type)), React.createElement(\"div\", {\n        className: \"mdl-card__supporting-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, this.getInStock()), React.createElement(\"div\", {\n        className: \"mdl-card__actions mdl-card--border\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Get Started\")), React.createElement(\"div\", {\n        className: \"mdl-card__menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"share\"))))), React.createElement(\"div\", {\n        className: \"stat_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"demo-card-wide mdl-card mdl-shadow--2dp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mdl-card__title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mdl-card__title-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Welcome\")), React.createElement(\"div\", {\n        className: \"mdl-card__supporting-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, this.velocityRender()), React.createElement(\"div\", {\n        className: \"mdl-card__actions mdl-card--border\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"Get Started\")), React.createElement(\"div\", {\n        className: \"mdl-card__menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"material-icons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"share\")))))), React.createElement(InventoryChart, {\n        data: this.state.response,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"page_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, this.renderContent());\n  }\n\n}\n\nexport default Inventory;","map":{"version":3,"sources":["/Users/yazanalmatar/Desktop/dashboard/client/src/components/Inventory.js"],"names":["React","InventoryChart","Loading","moment","Inventory","Component","constructor","props","fetchRequestedId","response","fetch","state","requestedId","method","headers","then","json","data","setState","daysDiffFinder","velocityFinder","console","log","velocityObject","oldestDate","inventory","date","newestDate","length","oDate","nDate","diff","daysDiff","oldestInv","newestInv","velocityData","variants","map","inv","i","velocity","inventory_quantity","title","id","velocityRender","velocityState","velocityVar","variant","match","params","stockArr","componentDidMount","getInStock","mostUpdatedInv","tempArr","inStock","item","push","style","stockText","color","renderContent","imageURL","image","backgroundImage","product_type","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport InventoryChart from \"./InventoryChart\";\nimport Loading from \"./Loading\";\nimport moment from \"moment\";\nclass Inventory extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requestedId: this.props.match.params.id,\n      response: null,\n      daysDiff: 0,\n      stockArr: [],\n      velocityObject: {}\n    };\n  }\n  componentDidMount() {\n    this.fetchRequestedId();\n  }\n\n  fetchRequestedId = async props => {\n    const response = await fetch(\n      `/api/v1/inventory/${this.state.requestedId}`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }\n    )\n      .then(response => {\n        return response.json();\n      })\n      .then(data => {\n        this.setState({ response: data });\n        this.daysDiffFinder();\n        this.velocityFinder();\n        console.log(this.state.velocityObject, \"after then function\")\n      });\n  };\n  getInStock() {\n    const mostUpdatedInv = this.state.response[0].inventory[\n      this.state.response[0].inventory.length - 1\n    ];\n    var tempArr = [];\n    var inStock = mostUpdatedInv.variants.map(item => {\n      console.log(item);\n      tempArr.push(item.inventory_quantity);\n      var style = {};\n      var stockText = \"In Stock:\";\n      if (item.inventory_quantity == 0) {\n        style = { color: \"red\" };\n        stockText = \"Out of stock\";\n      }\n      return (\n        <h6 style={style}>\n          {item.title == \"Default Title\" ? \" \" : \"Size: \" + item.title}{\" \"}\n          {stockText}{\" \"}\n          {item.inventory_quantity == 0 ? \" \" : item.inventory_quantity}\n        </h6>\n      );\n    });\n    //this.setState({stockArr:tempArr})\n    return inStock;\n  }\n\n  daysDiffFinder = () => {\n    const oldestDate = this.state.response[0].inventory[0].date;\n    const newestDate = this.state.response[0].inventory[\n      this.state.response[0].inventory.length - 1\n    ].date;\n    var oDate = moment(oldestDate);\n    var nDate = moment(newestDate);\n    console.log(oldestDate);\n    console.log(newestDate);\n    var diff = nDate.diff(oDate, \"days\");\n    console.log(diff);\n    this.setState({ daysDiff: diff });\n    console.log(diff);\n  };\n  velocityFinder = () => {\n    const oldestInv = this.state.response[0].inventory[0];\n    const newestInv = this.state.response[0].inventory[\n      this.state.response[0].inventory.length - 1\n    ];\n    var velocityObject = {}\n    console.log(oldestInv, newestInv);\n    const velocityData = oldestInv.variants.map((inv, i) => {\n      const velocity =\n        (inv.inventory_quantity - newestInv.variants[i].inventory_quantity) /\n        this.state.daysDiff;\n      console.log(\"--------------------------------\");\n      const title = this.state.response[0].variants[i].title;\n      console.log(this.state.response);\n      console.log(title);\n      console.log(\"--------------------------------\");\n      console.log(inv.id)\n      velocityObject[inv.id] = {\n        title:title,\n        velocity:velocity\n      }\n\n    //   return (\n    //     <div>\n    //       <h6>\n    //         {title == \"Default Title\" ? \" \" : \"Size: \" + title} Velocity:{\" \"}\n    //         {velocity.toFixed(2)} Out of stock in:\n    //       </h6>\n    //     </div>\n    //   );\n    // });\n    // return velocityData;\n  })\n\n  this.setState({velocityObject:velocityObject})\n  console.log(velocityObject,\"velocity Object\")\n}\nvelocityRender = () => {\n  if (this.state.velocityObject != null){\n    var velocityState = this.state.velocityObject\n    var velocityVar = this.state.response[0].variants.map(variant=> {\n    console.log(\"*******\")\n    console.log(variant)\n      console.log(velocityState)\n\n    console.log(velocityState)\n    console.log(\"*******\")\n   return (\n     <div>\n       <h6>\n       {/* {velocityState[variant.id].title}\n       {velocityState[variant.id].velocity} */}\n       </h6>\n     </div>\n   )\n  })\n  return velocityVar;\n  }\n  \n}\n  renderContent() {\n    if (this.state.response) {\n      /************html*************/\n      const imageURL = this.state.response[0].image;\n   //   let stock = '';\n      // if (this.state.stock) {\n      //   oerijgeoirjg.map((vv) =>{\n      //     stock+=(<p>feokroke</p>)\n      //   })\n      // }\n      return (\n        <div>\n          <div className=\"product_info_container\">\n            <div className=\"product_info_card\">\n              <div className=\"demo-card-wide mdl-card mdl-shadow--2dp\">\n                <div\n                  className=\"mdl-card__title\"\n                  style={{ backgroundImage: `url(${imageURL})` }}\n                >\n                  <h2 className=\"mdl-card__title-text\">\n                    {this.state.response[0].title} -{\" \"}\n                    {this.state.response[0].product_type}\n                  </h2>\n                </div>\n                <div className=\"mdl-card__supporting-text\">\n                  {this.getInStock()}\n                </div>\n                <div className=\"mdl-card__actions mdl-card--border\">\n                  <a className=\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\">\n                    Get Started\n                  </a>\n                </div>\n                <div className=\"mdl-card__menu\">\n                  <button className=\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\">\n                    <i className=\"material-icons\">share</i>\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div className=\"stat_container\">\n              <div className=\"demo-card-wide mdl-card mdl-shadow--2dp\">\n                <div className=\"mdl-card__title\">\n                  <h2 className=\"mdl-card__title-text\">Welcome</h2>\n                </div>\n                <div className=\"mdl-card__supporting-text\">\n                  {this.velocityRender()}\n                </div>\n                <div className=\"mdl-card__actions mdl-card--border\">\n                  <a className=\"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect\">\n                    Get Started\n                  </a>\n                </div>\n                <div className=\"mdl-card__menu\">\n                  <button className=\"mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect\">\n                    <i className=\"material-icons\">share</i>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n          <InventoryChart data={this.state.response} />\n        </div>\n      );\n    }\n    return <Loading />;\n  }\n\n  render() {\n    return <div className=\"page_container\">{this.renderContent()}</div>;\n  }\n}\nexport default Inventory;\n"]},"metadata":{},"sourceType":"module"}