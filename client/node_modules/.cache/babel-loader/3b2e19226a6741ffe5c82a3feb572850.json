{"ast":null,"code":"var _jsxFileName = \"/Users/yazanalmatar/Desktop/dashboard/client/src/components/Inventory.js\";\nimport React from \"react\";\nimport InventoryChart from \"./InventoryChart\";\nimport Loading from \"./Loading\";\nimport moment from \"moment\";\n\nclass Inventory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchRequestedId = async props => {\n      const response = await fetch(\"/api/v1/inventory/\".concat(this.state.requestedId), {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => {\n        return response.json();\n      }).then(data => {\n        this.setState({\n          response: data\n        });\n        this.daysDiffFinder();\n        this.getInStock();\n        this.velocityFinder();\n        console.log(this.state.velocityObject, \"after then function\");\n      });\n    };\n\n    this.inStockRender = () => {\n      if (Object.keys(this.state.stockObject).length) {\n        var objectOfInv = this.state.stockObject;\n        const toBeReturned = this.state.response[0].variants.map((variant, i) => {\n          var oneItemStock = objectOfInv[variant.id].inventory_quantity;\n          console.log(objectOfInv[variant.id].inventory_quantity == 0, \"inventory quantity\");\n\n          if (objectOfInv[variant.id].inventory_quantity == 0) {\n            var style = {\n              color: \"red\"\n            };\n          }\n\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          }, React.createElement(\"h4\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          }), React.createElement(\"h6\", {\n            style: {\n              style\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          }, objectOfInv[variant.id].title == \"Default Title\" ? \" \" : \"Size: \".concat(objectOfInv[variant.id].title), \" \", \"-\", objectOfInv[variant.id].inventory_quantity == 0 ? \"Out of stock\" : \"In stock: \".concat(objectOfInv[variant.id].inventory_quantity)));\n        });\n        return toBeReturned;\n      }\n    };\n\n    this.daysDiffFinder = () => {\n      const oldestDate = this.state.response[0].inventory[0].date;\n      const newestDate = this.state.response[0].inventory[this.state.response[0].inventory.length - 1].date;\n      var oDate = moment(oldestDate);\n      var nDate = moment(newestDate);\n      console.log(oldestDate);\n      console.log(newestDate);\n      var diff = nDate.diff(oDate, \"days\");\n      console.log(diff);\n      this.setState({\n        daysDiff: diff\n      });\n      console.log(diff);\n    };\n\n    this.velocityFinder = () => {\n      if (this.state.response) {\n        console.log(this.state.response == null);\n        const oldestInv = this.state.response[0].inventory[0];\n        const newestInv = this.state.response[0].inventory[this.state.response[0].inventory.length - 1];\n        var velocityObject = {};\n        var inStockState = this.state.stockObject;\n        console.log(oldestInv, newestInv);\n        var avgOOS = 0;\n        const velocityData = oldestInv.variants.map((inv, i) => {\n          const velocity = (inv.inventory_quantity - newestInv.variants[i].inventory_quantity) / this.state.daysDiff;\n          console.log(\"--------------------------------\");\n          const title = this.state.response[0].variants[i].title;\n          console.log(this.state.response);\n          console.log(title);\n          console.log(\"--------------------------------\");\n          console.log(inv.id, \"id\");\n          console.log(inv, \"inv\");\n          console.log(inStockState, \"inStockState\");\n          velocityObject[inv.id] = {\n            title: title,\n            velocity: velocity\n          };\n          var avgOutOfStock = inStockState[inv.id].inventory_quantity / velocityObject[inv.id].velocity;\n          avgOOS = avgOOS + avgOutOfStock; // (inStockState[variant.id].inventory_quantity / velocityState[variant.id].velocity)\n          //   return (\n          //     <div>\n          //       <h6>\n          //         {title == \"Default Title\" ? \" \" : \"Size: \" + title} Velocity:{\" \"}\n          //         {velocity.toFixed(2)} Out of stock in:\n          //       </h6>\n          //     </div>\n          //   );\n          // });\n          // return velocityData;\n        });\n        this.setState({\n          velocityObject: velocityObject\n        });\n        this.setState({\n          globalStockDays: avgOOS / newestInv.variants.length\n        });\n        console.log(velocityObject, \"velocity Object\");\n      }\n    };\n\n    this.velocityRender = () => {\n      if (Object.keys(this.state.velocityObject).length && Object.keys(this.state.stockObject).length) {\n        var velocityState = this.state.velocityObject;\n        const inStockState = this.state.stockObject;\n        var velocityVar = this.state.response[0].variants.map(variant => {\n          console.log(\"*******\");\n          console.log(variant);\n          var outOfStockDays = (inStockState[variant.id].inventory_quantity / velocityState[variant.id].velocity).toFixed(0);\n          console.log(velocityState);\n          console.log(inStockState);\n          console.log(\"*******\");\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 191\n            },\n            __self: this\n          }, React.createElement(\"h6\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192\n            },\n            __self: this\n          }, velocityState[variant.id].title == \"Default Title\" ? \" \" : \"Size: \".concat(velocityState[variant.id].title), \" \", \"- Velocity: \", velocityState[variant.id].velocity, outOfStockDays != NaN && outOfStockDays != Infinity ? \"- Out of stock in: \".concat(outOfStockDays, \" days\") : \" \"));\n        });\n        return velocityVar;\n      } else {\n        return false;\n      }\n    };\n\n    this.state = {\n      requestedId: this.props.match.params.id,\n      response: null,\n      daysDiff: 0,\n      stockObject: {},\n      velocityObject: {},\n      globalStock: 0,\n      globalStockDays: 0\n    };\n  }\n\n  componentDidMount() {\n    this.fetchRequestedId();\n  }\n\n  getInStock() {\n    if (this.state.response) {\n      var inStockGlobal = {};\n      const mostUpdatedInv = this.state.response[0].inventory[this.state.response[0].inventory.length - 1];\n      var globalStock = 0;\n      mostUpdatedInv.variants.map(item => {\n        console.log(item, \"item\");\n        globalStock = globalStock + item.inventory_quantity;\n        inStockGlobal[item.id] = {\n          title: item.title,\n          inventory_quantity: item.inventory_quantity\n        }; // tempArr.push(item.inventory_quantity);\n        // var style = {};\n        // var stockText = \"In Stock:\";\n        // if (item.inventory_quantity == 0) {\n        //   style = { color: \"red\" };\n        //   stockText = \"Out of stock\";\n        // }\n        // return (\n        //   <h6 style={style}>\n        //     {item.title == \"Default Title\" ? \" \" : \"Size: \" + item.title}{\" \"}\n        //     {stockText}{\" \"}\n        //     {item.inventory_quantity == 0 ? \" \" : item.inventory_quantity}\n        //   </h6>\n        // );\n      });\n      this.setState({\n        stockObject: inStockGlobal\n      });\n      this.setState({\n        globalStock: globalStock\n      });\n      console.log(this.state.stockObject, \"state\");\n    }\n  }\n\n  renderContent() {\n    if (this.state.response) {\n      /************html*************/\n      const imageURL = this.state.response[0].image; //   let stock = '';\n      // if (this.state.stock) {\n      //   oerijgeoirjg.map((vv) =>{\n      //     stock+=(<p>feokroke</p>)\n      //   })\n      // }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"backButton\",\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"/a/dashboard/products\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        class: \"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect back-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"Back\"))), React.createElement(\"div\", {\n        className: \"product_info_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"product_info_card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"demo-card-wide mdl-card mdl-shadow--2dp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mdl-card__title\",\n        style: {\n          backgroundImage: \"url(\".concat(imageURL, \")\")\n        },\n        style: {\n          height: \"270px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mdl-card__title-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, this.state.response[0].title, \" - (\", this.state.response[0].product_type, \")\")), React.createElement(\"div\", {\n        className: \"mdl-card__supporting-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, this.state.globalStock == 0 ? React.createElement(\"h4\", {\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Out of Stock\") : React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"Global Stock: \", this.state.globalStock), this.inStockRender()))), React.createElement(\"div\", {\n        className: \"stat_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"demo-card-wide mdl-card mdl-shadow--2dp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mdl-card__title\",\n        style: {\n          height: \"270px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"mdl-card__title-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Statistics\")), React.createElement(\"div\", {\n        className: \"mdl-card__supporting-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, this.state.globalStockDays != NaN && this.state.globalStockDays != Infinity ? \"Average Out Of Stock Days: \".concat(this.state.globalStockDays.toFixed(0)) : \"N/A\"), this.velocityRender() ? this.velocityRender() : null)))), React.createElement(InventoryChart, {\n        data: this.state.response,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        margin: \"auto\",\n        marginTop: \"150px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"page_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, this.renderContent());\n  }\n\n}\n\nexport default Inventory;","map":{"version":3,"sources":["/Users/yazanalmatar/Desktop/dashboard/client/src/components/Inventory.js"],"names":["React","InventoryChart","Loading","moment","Inventory","Component","constructor","props","fetchRequestedId","response","fetch","state","requestedId","method","headers","then","json","data","setState","daysDiffFinder","getInStock","velocityFinder","console","log","velocityObject","inStockRender","Object","keys","stockObject","length","objectOfInv","toBeReturned","variants","map","variant","i","oneItemStock","id","inventory_quantity","style","color","title","oldestDate","inventory","date","newestDate","oDate","nDate","diff","daysDiff","oldestInv","newestInv","inStockState","avgOOS","velocityData","inv","velocity","avgOutOfStock","globalStockDays","velocityRender","velocityState","velocityVar","outOfStockDays","toFixed","NaN","Infinity","match","params","globalStock","componentDidMount","inStockGlobal","mostUpdatedInv","item","renderContent","imageURL","image","display","justifyContent","backgroundImage","height","product_type","margin","marginTop","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport InventoryChart from \"./InventoryChart\";\nimport Loading from \"./Loading\";\nimport moment from \"moment\";\nclass Inventory extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requestedId: this.props.match.params.id,\n      response: null,\n      daysDiff: 0,\n      stockObject: {},\n      velocityObject: {},\n      globalStock: 0,\n      globalStockDays: 0\n    };\n  }\n  componentDidMount() {\n    this.fetchRequestedId();\n  }\n\n  fetchRequestedId = async props => {\n    const response = await fetch(\n      `/api/v1/inventory/${this.state.requestedId}`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }\n    )\n      .then(response => {\n        return response.json();\n      })\n      .then(data => {\n        this.setState({ response: data });\n        this.daysDiffFinder();\n        this.getInStock();\n        this.velocityFinder();\n        console.log(this.state.velocityObject, \"after then function\");\n      });\n  };\n  getInStock() {\n    if (this.state.response) {\n      var inStockGlobal = {};\n      const mostUpdatedInv = this.state.response[0].inventory[\n        this.state.response[0].inventory.length - 1\n      ];\n      var globalStock = 0;\n      mostUpdatedInv.variants.map(item => {\n        console.log(item, \"item\");\n        globalStock = globalStock + item.inventory_quantity;\n        inStockGlobal[item.id] = {\n          title: item.title,\n          inventory_quantity: item.inventory_quantity\n        };\n        // tempArr.push(item.inventory_quantity);\n        // var style = {};\n        // var stockText = \"In Stock:\";\n        // if (item.inventory_quantity == 0) {\n        //   style = { color: \"red\" };\n        //   stockText = \"Out of stock\";\n        // }\n        // return (\n        //   <h6 style={style}>\n        //     {item.title == \"Default Title\" ? \" \" : \"Size: \" + item.title}{\" \"}\n        //     {stockText}{\" \"}\n        //     {item.inventory_quantity == 0 ? \" \" : item.inventory_quantity}\n        //   </h6>\n        // );\n      });\n      this.setState({ stockObject: inStockGlobal });\n      this.setState({ globalStock: globalStock });\n      console.log(this.state.stockObject, \"state\");\n    }\n  }\n  inStockRender = () => {\n    if (Object.keys(this.state.stockObject).length) {\n      var objectOfInv = this.state.stockObject;\n      const toBeReturned = this.state.response[0].variants.map((variant, i) => {\n        var oneItemStock = objectOfInv[variant.id].inventory_quantity;\n        console.log(\n          objectOfInv[variant.id].inventory_quantity == 0,\n          \"inventory quantity\"\n        );\n        if (objectOfInv[variant.id].inventory_quantity == 0) {\n          var style = {\n            color: \"red\"\n          };\n        }\n        return (\n          <div>\n            <h4 />\n            <h6 style={{ style }}>\n              {objectOfInv[variant.id].title == \"Default Title\"\n                ? \" \"\n                : `Size: ${objectOfInv[variant.id].title}`}{\" \"}\n              -\n              {objectOfInv[variant.id].inventory_quantity == 0\n                ? \"Out of stock\"\n                : `In stock: ${objectOfInv[variant.id].inventory_quantity}`}\n            </h6>\n          </div>\n        );\n      });\n      return toBeReturned;\n    }\n  };\n\n  daysDiffFinder = () => {\n    const oldestDate = this.state.response[0].inventory[0].date;\n    const newestDate = this.state.response[0].inventory[\n      this.state.response[0].inventory.length - 1\n    ].date;\n    var oDate = moment(oldestDate);\n    var nDate = moment(newestDate);\n    console.log(oldestDate);\n    console.log(newestDate);\n    var diff = nDate.diff(oDate, \"days\");\n    console.log(diff);\n    this.setState({ daysDiff: diff });\n    console.log(diff);\n  };\n  velocityFinder = () => {\n    if (this.state.response) {\n      console.log(this.state.response == null);\n      const oldestInv = this.state.response[0].inventory[0];\n      const newestInv = this.state.response[0].inventory[\n        this.state.response[0].inventory.length - 1\n      ];\n      var velocityObject = {};\n      var inStockState = this.state.stockObject;\n      console.log(oldestInv, newestInv);\n      var avgOOS = 0;\n      const velocityData = oldestInv.variants.map((inv, i) => {\n        const velocity =\n          (inv.inventory_quantity - newestInv.variants[i].inventory_quantity) /\n          this.state.daysDiff;\n        console.log(\"--------------------------------\");\n        const title = this.state.response[0].variants[i].title;\n        console.log(this.state.response);\n        console.log(title);\n        console.log(\"--------------------------------\");\n        console.log(inv.id, \"id\");\n        console.log(inv, \"inv\");\n        console.log(inStockState, \"inStockState\");\n        velocityObject[inv.id] = {\n          title: title,\n          velocity: velocity\n        };\n        var avgOutOfStock =\n          inStockState[inv.id].inventory_quantity /\n          velocityObject[inv.id].velocity;\n        avgOOS = avgOOS + avgOutOfStock;\n        // (inStockState[variant.id].inventory_quantity / velocityState[variant.id].velocity)\n        //   return (\n        //     <div>\n        //       <h6>\n        //         {title == \"Default Title\" ? \" \" : \"Size: \" + title} Velocity:{\" \"}\n        //         {velocity.toFixed(2)} Out of stock in:\n        //       </h6>\n        //     </div>\n        //   );\n        // });\n        // return velocityData;\n      });\n\n      this.setState({ velocityObject: velocityObject });\n      this.setState({ globalStockDays: avgOOS / newestInv.variants.length });\n      console.log(velocityObject, \"velocity Object\");\n    }\n  };\n  velocityRender = () => {\n    if (\n      Object.keys(this.state.velocityObject).length &&\n      Object.keys(this.state.stockObject).length\n    ) {\n      var velocityState = this.state.velocityObject;\n      const inStockState = this.state.stockObject;\n      var velocityVar = this.state.response[0].variants.map(variant => {\n        console.log(\"*******\");\n        console.log(variant);\n        var outOfStockDays = (\n          inStockState[variant.id].inventory_quantity /\n          velocityState[variant.id].velocity\n        ).toFixed(0);\n        console.log(velocityState);\n        console.log(inStockState);\n        console.log(\"*******\");\n        return (\n          <div>\n            <h6>\n              {velocityState[variant.id].title == \"Default Title\"\n                ? \" \"\n                : `Size: ${velocityState[variant.id].title}`}{\" \"}\n              - Velocity: {velocityState[variant.id].velocity}\n              {outOfStockDays != NaN && outOfStockDays != Infinity\n                ? `- Out of stock in: ${outOfStockDays} days`\n                : \" \"}\n            </h6>\n          </div>\n        );\n      });\n      return velocityVar;\n    } else {\n      return false;\n    }\n  };\n  renderContent() {\n    if (this.state.response) {\n      /************html*************/\n      const imageURL = this.state.response[0].image;\n      //   let stock = '';\n      // if (this.state.stock) {\n      //   oerijgeoirjg.map((vv) =>{\n      //     stock+=(<p>feokroke</p>)\n      //   })\n      // }\n      return (\n        <div>\n          <div className=\"backButton\" style={{display:\"flex\", justifyContent:\"center\"}}>\n            <a href=\"/a/dashboard/products\">\n            <button class=\"mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect back-button\">\n             Back\n            </button>\n            </a>\n          </div>\n          <div className=\"product_info_container\">\n            <div className=\"product_info_card\">\n              <div className=\"demo-card-wide mdl-card mdl-shadow--2dp\">\n                <div\n                  className=\"mdl-card__title\" \n                  style={{ backgroundImage: `url(${imageURL})` }}\n                  style={{height:\"270px\"}}\n                >\n                  <h2 className=\"mdl-card__title-text\">\n                    {this.state.response[0].title} - (\n                    {this.state.response[0].product_type})\n                  </h2>\n                </div>\n                <div className=\"mdl-card__supporting-text\">\n                  {this.state.globalStock == 0 ? (\n                    <h4 style={{ color: \"red\" }}>Out of Stock</h4>\n                  ) : (\n                    <h4>Global Stock: {this.state.globalStock}</h4>\n                  )}\n                  {this.inStockRender()}\n                </div>\n              </div>\n            </div>\n            <div className=\"stat_container\">\n              <div className=\"demo-card-wide mdl-card mdl-shadow--2dp\">\n                <div className=\"mdl-card__title\" style={{height:\"270px\"}}>\n                  <h2 className=\"mdl-card__title-text\">Statistics</h2>\n                </div>\n                <div className=\"mdl-card__supporting-text\">\n                  {\n                    <h4>\n                      {this.state.globalStockDays != NaN &&\n                      this.state.globalStockDays != Infinity\n                        ? `Average Out Of Stock Days: ${\n                            this.state.globalStockDays.toFixed(0)\n                          }`\n                        : \"N/A\"}\n                    </h4>\n                  }\n                  {this.velocityRender() ? this.velocityRender() : null}\n                </div>\n              </div>\n            </div>\n          </div>\n          <InventoryChart data={this.state.response} />\n        </div>\n      );\n    }\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          margin: \"auto\",\n          marginTop: \"150px\"\n        }}\n      >\n        <Loading />\n      </div>\n    );\n  }\n\n  render() {\n    return <div className=\"page_container\">{this.renderContent()}</div>;\n  }\n}\nexport default Inventory;\n"]},"metadata":{},"sourceType":"module"}